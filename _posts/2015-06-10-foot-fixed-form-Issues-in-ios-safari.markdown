---
layout: post
title:  "모바일 하단 고정 레이아웃 이슈"
date:   2013-11-10 10:18:00
categories: Thriller Comedy Horror
---

# 하단 고정 레이아웃
- 아래와 같이 html, css 를 작성하면 해당 영역은 하단에 고정된다.
{% highlight html %}
<div id="wrap">
	<div class="contents">컨텐츠 영역</div>
	<div class="fixed">
		<input type="text">
	</div>
</div>
{% endhighlight %}

{% highlight css %}
.fixed{
	height:100px;
	width: 100%;
	position: fixed;
	left: 0;
	bottom: 0;
}
{% endhighlight %}

화면상 하단에 *특정 요소를 상시 고정*시켜 주는 방법으로 중요한 컨텐츠나 사용자가 빠르게 접근해야할 요소를 스크롤과 관계없이 `display` 를 기준으로 고정시켜 주기 때문에, UI상으로 아래와 같을때 자주 사용된다.

- 현제 페이지를 알리는 제목
- 다른 페이지나 카테고리로 이동할 수 있는 메뉴 버튼(햄버거 버튼 등)
- 현재 페이지를 공유 하는 공유하기 버튼
- 카테고리나 사이트 메뉴 중 중요한 메뉴만 특정영역에 고정시킴
- 커머셜 사이트에서 제품 상세 페이지의 *옵션선택* 영역

누군가 그랬다.  
**web 을 app 처럼 만들려고 하기 때문에 문제가 발생한다**  
분명 내가 처음 모바일 웹 사이트를 제작할 당시만 해도 *하단고정* 에 대해서는 기술적으로 구현이 까다로운 편에 속했다.(당시 모바일 기기의 브라우저에서 하단 고정(position:fixed; bottom:0)을 지원하지 않았다.)  
하지만 지금 포스팅 하고 있는 이 시점에 대부분의 모바일 기기에 포함되거나 설치되는 브라우저는 하단고정을 지원하고 있다.  
나의 경우는 *커머셜 사이트에서 제품 상세 페이지의 옵션선택* 기능을 하단 고정영역에 위치 시킴으로써 문제가 발생했다.  

##  Issue 1
*하단 고정영역에 있는 form 요소*  
문제는 IOS safari 에서 발생했고 테스트 디바이스는 iphone 5s / iOS 8.3 이었다.
증상은 하단 고정영역의 form 요소를 터치 했을때, iOS 의 기본 UI(키보드, 셀렉트박스 등)가 하단에서 올라오면서 스크롤이 html 문서상 form 요소의 위치로 강제 이동되는 것 이었다.
  
결론부터 얘기 하자면, 해결 방법은 없다.  
fixed 속성을 absolute 로 변경하고, 스크롤값이 변경될 때마다 해당 요소의 top 값을 갱신해 주면 가능은 하지만 자연스럽지 않은 모습을 보여주게 된다. 또한 UI자체가 하단에서 위로 올라오면서 열리는 방식이었으므로 구현은 더 복잡할 수 밖에 없었다.
우리는 기본 form 요소를 버리고, layer등을 문서 위로 띄워 조금 다른 UI로 사용자에게 보여주기로 했다.
이 문제는 iPhone 에서만 발생했다(iPad 도 동일할 것이다.).

## Issue 2
*하단 고정영역 밖에 있는 form 요소*
이 문제는 조금 복잡하다.  
컨텐츠 중간에 fomr 요소가 있고, 하단엔 여전히 고정된 요소가 붙어 있다. 사용자가 문서 중간에 들어가 있는 form 요소를 터치하면 당연히 포커스가 이동되면서, 기기의 기본 UI 가 하단에서 올라오거나 화면중간에 뜨게 된다.  
